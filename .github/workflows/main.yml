name: "example-cron-action2"
on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - name: Get package update date
        run: |
         updated_at=$(curl -L -H 'Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}' https://api.github.com/users/${{ github.repository_owner }}/packages/container/aptypo.io  | jq -r .updated_at)
         updated_at_timestamp=$(date -d $updated_at +"%s")
         echo 'UPDATED_AT='$updated_at_timestamp >> $GITHUB_ENV    
      - name: Get Tetris package update date
        run: |
         tetris_updated_at=$(curl -L -H 'Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}' https://api.github.com/users/${{ github.repository_owner }}/packages/container/react-tetris  | jq -r .updated_at)
         tetris_updated_at_timestamp=$(date -d $tetris_updated_at +"%s")
         echo 'TETRIS_UPDATED_AT='$tetris_updated_at_timestamp >> $GITHUB_ENV
      - name: bar
        run: |
          echo aws lightsail
      - name: foo
        if: ${{ env.TETRIS_UPDATED_AT > env.UPDATED_AT }}
        run: |
          echo 1
